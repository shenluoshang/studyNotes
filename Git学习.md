# Git学习

## 1、 Git环境配置

> Git 配置

所有的配置文件，其实都是保存在了本地 ！

查看配置 ==git config -l==

![image-20220106141203516](Git%E5%AD%A6%E4%B9%A0.assets/image-20220106141203516-16414495257031.png)

查看不同级别的配置文件：

```bash
# 查看系统的config
git config --system --list

# 查看当前用户(global)配置
git config --global --list
```

Git 相关的配置文件：

1. C:\Program Files\Git\etc\gitconfig ： Git 安装目录下的gitconfig  --system 系统级
2. ![image-20220106142408635](Git%E5%AD%A6%E4%B9%A0.assets/image-20220106142408635-16414502501442.png)

2. C:\Users\w1890\ .gitconfig 只适用于当前登录用户的配置   --global全局

![image-20220106143021616](Git%E5%AD%A6%E4%B9%A0.assets/image-20220106143021616-16414506227843.png)

这里可以直接编辑配置文件，通过命令设置后会响应到这里。

> ==设置用户名与邮箱（用户标识、必要）==

当你安装Git后首先要做的事情是设置你的用户名和Email地址。这是非常重要的，因为每次Git提交都会使用该信息。它会被永远的嵌入到了你的提交中。

## 2、Git基本理论（核心）

==所有的实践都是源于这个理论进行的==

> 工作区域

Git本地有三个工作区域 工作目录（Working Directory） 、 暂存区（Stage/Index）、资源库（Repository或Git Directory）。如果在加上远程的git仓库（Remote Directory）就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：

![image-20220106143950824](Git%E5%AD%A6%E4%B9%A0.assets/image-20220106143950824-16414511920494.png)



- Workspace：工作区，就是你平时存放项目代码的地方
- Index / Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息
- Repository：仓库区（或本地仓库 ），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本
- Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换。

本地的三个区域确切的说应该是git仓库中HEAD指向的版本



> 工作流程

git的工作流程一般是这样的：

1. 在工作目录中添加、修改文件；
2. 将需要进行版本管理的文件放入暂存区域
3. 将暂存区域的文件提交到git仓库。

因此，git管理的文件有三种状态：已修改（modified），已暂存（staged），已提交（committed）

## 3、Git项目搭建

> 创建工作目录与常用指令

工作目录（WorkSpace）一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。

日常使用只要记住下图6个命令：

![image-20220106145848247](Git%E5%AD%A6%E4%B9%A0.assets/image-20220106145848247-16414523293135.png)

> 本地仓库搭建

创建本地仓库的方法有两种：一种是创建全新的仓库，另一种是克隆远程仓库。

1. 创建全新的仓库，需要用 Git 管理的项目的根目录执行：

```bash
# 在当前目录新建一个Git代码库
$ git init
```

2. 执行后可以看到，仅仅在项目目录多出了一个.git目录，关于版本等的所有信息都在这个目录里面。

> 克隆远程仓库

1. 另一种方式是克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地！

```bash
# 克隆一个项目和它的整个代码历史（版本信息）
$ git clone [url] https://github.com/shenluoshang/GitStudy.git
```

2. 去gitee或者github上克隆一个测试！

##  4、Git文件操作

> 文件4种状态

版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。

- **Untracked**：未跟踪，此文件在文件夹中，但并没有加入到git库，不参与版本控制，通过 `git add ` 状态变为 `Staged`.
- **Unmodify**：文件已经入库，未修改，即版本库中的文件快照内容与文件夹中完全一致。这种类型的文件有两种去处，如果它被修改，而变为 `Modified` 。 如果使用 `git rm ` 移出版本库，则成为 `Untracked` 文件。
- **Modified**：文件已修改，仅仅是修改，并没有进行其他的操作，这个文件也有两个去处，通过 `git add ` 可进入暂存 `staged ` 状态，使用 `git checkout` 则丢弃修改过，返回到 `unmodify` 状态，这个 `git checkout` 即从库中取出文件，覆盖当前修改！
- **Staged**：暂存状态，执行 `git commit` 则将修改同步到库中，这时库中的文件和本地文件又变为一致，文件为 `Unmodify ` 状态。执行 `git reset HEAD filename ` 取消暂存，文件状态为 `Modified` 。



> 查看文件状态

上面说文件有4中状态，通过如下命令可以查看到文件的状态：

```bash
# 查看指定文件状态
git status [filename]

# 查看所有文件状态
git status

# git add . 		添加所有文件到暂存区
# git commit -m	"消息内容"	提交暂存区中的内容到本地仓库  -m 提交信息
```



> 忽略文件

有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等

在主目录下建立 ".gitignore" 文件，此文件有如下规则：

1. 忽略文件中的空行或以井号（#）开始的行将会被忽略。
2. 可以使用Linux通配符。例如：星号（ * ）代表任意多个字符，问号（ ？）代表一个字符，方括号（ [abc] ）代表可选字符范围，大括号（{string1，string2，···}）代表可选的字符串等。
3. 如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。
4. 如果名称的最前面是一个路径分隔符（/），表示要忽略的文件在此目录下，而子目录中的文件不忽略。
5. 如果名称的最后面是一个路径分隔符（/），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。

```bash
# 为注释
*.txt        #忽略所有 .txt结尾的文件,这样的话上传就不会被选中！
!lib.txt     #但lib.txt除外
/temp        #仅忽略项目根目录下的TODO文件,不包括其它目录temp
build/       #忽略build/目录下的所有文件
doc/*.txt    #会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
```



## 5、遇到过的坑

> 目前的远程仓库端有 GitHub、码云(gitee)、gitlab（需要自己搭建远程仓库服务器）

- 在使用git上传远程仓库时，一定一定要确定==是否在远程仓库端是否保存了对应的公钥==
- 如果项目需要上传不同的远程仓库端，切记要修改git的 ==全局用户名== 和 ==对应的邮箱== 这样才能在系统进行验证的时候，保证是本人登录，进而进行正常的 push 操作，否则的话会遇到即使输入正确的密码也进不去或者是直接连接失败的现象。
- 在使用个人搭建的远程仓库服务器时，需要和创建者询问一下，ssh和HTTP端口是否全部开放，没有开放的端口不能正常使用 git 功能。

